<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>{{ page.title }}</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes">
    <meta name="description" content="{{ site.description }}">
    <meta name="theme-color" content="#052049">
    <meta http-equiv="Permissions-Policy" content="interest-cohort=()"/>
    <meta name="format-detection" content="telephone=no">
    
    <!-- 禁用非阻塞加载效果 -->
    <script>
      // 确保页面完全刷新，禁用任何非阻塞加载效果
      if (window.performance && window.performance.navigation.type === 0) {
        // 这是一个新页面加载，不是从缓存恢复
        window.addEventListener('beforeunload', function() {
          // 在页面卸载前清除任何可能的缓存状态
          sessionStorage.setItem('forceReload', 'true');
        });
      }
      
      // 检查是否需要强制刷新
      if (sessionStorage.getItem('forceReload') === 'true') {
        sessionStorage.removeItem('forceReload');
        // 确保页面从服务器重新加载而不是从缓存
        if (window.location.reload) {
          window.location.reload(true);
        }
      }
    </script>
    
    <!-- 预加载关键CSS资源 -->
    <link rel="preload" href="/static/css/critical.css" as="style">
    
    <!-- 内联关键CSS -->
    <style>
      /* 最基本的关键样式，用于首屏渲染 */
      body {
        padding-top: 70px;
        margin: 0;
        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
        font-size: 1rem;
        font-weight: 400;
        line-height: 1.5;
        color: #212529;
        background-color: #fff;
      }
      
      /* 导航栏样式 */
      .navbar {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        z-index: 1030;
        background-color: #2e86c1;
        margin-bottom: 20px;
        padding: 0.5rem 1rem;
      }
      
      .container {
        width: 100%;
        padding-right: 15px;
        padding-left: 15px;
        margin-right: auto;
        margin-left: auto;
        box-sizing: border-box;
      }
      
      /* 防止布局偏移的图像样式 */
      .navb-icon {
        height: auto;
        display: inline-block;
      }
      
      /* 明确设置图片占位空间 */
      .navb-icon.stem-logo {
        width: 88px; /* 根据2.2em实际尺寸设置 */
        height: 40px;
      }
      
      .navb-icon.polyu-logo {
        width: 72px; /* 根据1.8em实际尺寸设置 */
        height: 32px;
      }
      
      @media (min-width: 768px) {
        .container {
          max-width: 720px;
        }
      }
      
      @media (min-width: 992px) {
        .container {
          max-width: 960px;
        }
      }
      
      /* 导航栏组件样式 */
      .navbar-nav {
        display: flex;
        flex-direction: row;
        padding-left: 0;
        margin-bottom: 0;
        list-style: none;
      }
      
      .navbar-nav .nav-link {
        padding-right: 0.5rem;
        padding-left: 0.5rem;
        color: rgba(255, 255, 255, 0.85) !important;
        text-decoration: none !important;
      }
      
      .navbar-nav .nav-item.active .nav-link {
        color: #fff !important;
      }
      
      @media (max-width: 991px) {
        .navbar-nav .nav-link {
          color: #757575 !important; /* 灰色文本，小屏幕模式 */
        }
        
        .navbar-nav .nav-item.active .nav-link {
          color: #212529 !important; /* 黑色文本，小屏幕模式 */
        }
      }
      
      .navbar-brand {
        display: inline-block;
        padding-top: 0.3125rem;
        padding-bottom: 0.3125rem;
        margin-right: 1rem;
        font-size: 1.25rem;
        line-height: inherit;
        white-space: nowrap;
        text-decoration: none !important;
        color: #fff !important;
      }
      
      /* 确保导航项目不会被挤压 */
      .navbar-expand-lg .navbar-nav {
        flex-direction: row;
      }
      
      @media (max-width: 992px) {
        .navbar-collapse {
          width: 100%;
        }
        .navbar-nav {
          flex-direction: column;
        }
      }
      
      /* 内联 members-center.css */
      /* members 页面居中样式 */
      .members-center {
        display: block; /* 改为block布局，防止flex布局导致内容挤压 */
        max-width: 100%;
        margin: 0 auto;
      }

      /* 修复成员卡片布局 */
      .members-center .row {
        display: flex;
        flex-wrap: wrap;
        margin-right: -15px;
        margin-left: -15px;
      }

      .members-center .col-sm-9,
      .members-center .col-sm-12 {
        position: relative;
        width: 100%;
        padding-right: 15px;
        padding-left: 15px;
      }

      @media (min-width: 576px) {
        .members-center .col-sm-9 {
          flex: 0 0 75%;
          max-width: 75%;
        }
        .members-center .col-sm-12 {
          flex: 0 0 100%;
          max-width: 100%;
        }
      }

      .justify-content-center {
        justify-content: center !important;
      }
      
      /* 内联 syntax.css */
      .highlight  { background: #ffffff; }
      .highlight .c { color: #999988; font-style: italic } /* Comment */
      .highlight .err { color: #a61717; background-color: #e3d2d2 } /* Error */
      .highlight .k { font-weight: bold } /* Keyword */
      .highlight .o { font-weight: bold } /* Operator */
      .highlight .cm { color: #999988; font-style: italic } /* Comment.Multiline */
      .highlight .cp { color: #999999; font-weight: bold } /* Comment.Preproc */
      .highlight .c1 { color: #999988; font-style: italic } /* Comment.Single */
      .highlight .cs { color: #999999; font-weight: bold; font-style: italic } /* Comment.Special */
      .highlight .gd { color: #000000; background-color: #ffdddd } /* Generic.Deleted */
      .highlight .gd .x { color: #000000; background-color: #ffaaaa } /* Generic.Deleted.Specific */
      .highlight .ge { font-style: italic } /* Generic.Emph */
      .highlight .gr { color: #aa0000 } /* Generic.Error */
      .highlight .gh { color: #999999 } /* Generic.Heading */
      .highlight .gi { color: #000000; background-color: #ddffdd } /* Generic.Inserted */
      .highlight .gi .x { color: #000000; background-color: #aaffaa } /* Generic.Inserted.Specific */
      .highlight .go { color: #888888 } /* Generic.Output */
      .highlight .gp { color: #555555 } /* Generic.Prompt */
      .highlight .gs { font-weight: bold } /* Generic.Strong */
      .highlight .gu { color: #aaaaaa } /* Generic.Subheading */
      .highlight .gt { color: #aa0000 } /* Generic.Traceback */
      .highlight .kc { font-weight: bold } /* Keyword.Constant */
      .highlight .kd { font-weight: bold } /* Keyword.Declaration */
      .highlight .kp { font-weight: bold } /* Keyword.Pseudo */
      .highlight .kr { font-weight: bold } /* Keyword.Reserved */
      .highlight .kt { color: #445588; font-weight: bold } /* Keyword.Type */
      .highlight .m { color: #009999 } /* Literal.Number */
      .highlight .s { color: #d14 } /* Literal.String */
      .highlight .na { color: #008080 } /* Name.Attribute */
      .highlight .nb { color: #0086B3 } /* Name.Builtin */
      .highlight .nc { color: #445588; font-weight: bold } /* Name.Class */
      .highlight .no { color: #008080 } /* Name.Constant */
      .highlight .ni { color: #800080 } /* Name.Entity */
      .highlight .ne { color: #990000; font-weight: bold } /* Name.Exception */
      .highlight .nf { color: #990000; font-weight: bold } /* Name.Function */
      .highlight .nn { color: #555555 } /* Name.Namespace */
      .highlight .nt { color: #000080 } /* Name.Tag */
      .highlight .nv { color: #008080 } /* Name.Variable */
      .highlight .ow { font-weight: bold } /* Operator.Word */
      .highlight .w { color: #bbbbbb } /* Text.Whitespace */
      .highlight .mf { color: #009999 } /* Literal.Number.Float */
      .highlight .mh { color: #009999 } /* Literal.Number.Hex */
      .highlight .mi { color: #009999 } /* Literal.Number.Integer */
      .highlight .mo { color: #009999 } /* Literal.Number.Oct */
      .highlight .sb { color: #d14 } /* Literal.String.Backtick */
      .highlight .sc { color: #d14 } /* Literal.String.Char */
      .highlight .sd { color: #d14 } /* Literal.String.Doc */
      .highlight .s2 { color: #d14 } /* Literal.String.Double */
      .highlight .se { color: #d14 } /* Literal.String.Escape */
      .highlight .sh { color: #d14 } /* Literal.String.Heredoc */
      .highlight .si { color: #d14 } /* Literal.String.Interpol */
      .highlight .sx { color: #d14 } /* Literal.String.Other */
      .highlight .sr { color: #009926 } /* Literal.String.Regex */
      .highlight .s1 { color: #d14 } /* Literal.String.Single */
      .highlight .ss { color: #990073 } /* Literal.String.Symbol */
      .highlight .bp { color: #999999 } /* Name.Builtin.Pseudo */
      .highlight .vc { color: #008080 } /* Name.Variable.Class */
      .highlight .vg { color: #008080 } /* Name.Variable.Global */
      .highlight .vi { color: #008080 } /* Name.Variable.Instance */
      .highlight .il { color: #009999 } /* Literal.Number.Integer.Long */
    </style>
    
    <!-- 非关键CSS使用阻塞加载，确保页面正确显示 -->
    <link rel="stylesheet" href="/static/css/bootstrap.min.css">
    <link rel="stylesheet" href="/static/css/custom.css">
    <link rel="stylesheet" href="/static/css/mobile.css">
    
    {% if page.group == 'news' %}
    <link rel="alternate" type="application/atom+xml" title="Genomics in Healthcare Lab News Feed" href="/news.xml">
    <link rel="stylesheet" href="/static/css/news-custom.css">
    {% endif %}
    
    <!-- 预加载页面中的关键图像 -->
    <link rel="preload" href="/static/img/logo/STEMJC_genomics_in_healthcare.png" as="image">
    <link rel="preload" href="/static/img/logo/PolyU-Logo.png" as="image">
    
    <!-- 添加Material Icons字体 -->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    
    <!-- 添加加载CSS的后备脚本 -->
    <script>
      // 非阻塞CSS加载的后备方案
      !function(e){"use strict";var n=function(n,t,o){function i(e){if(a.body)return e();setTimeout(function(){i(e)})}function r(){l.addEventListener&&l.removeEventListener("load",r),l.media=o||"all"}var d,a=e.document,l=a.createElement("link");if(t)d=t;else{var s=(a.body||a.getElementsByTagName("head")[0]).childNodes;d=s[s.length-1]}var f=a.styleSheets;l.rel="stylesheet",l.href=n,l.media="only x",i(function(){d.parentNode.insertBefore(l,t?d:d.nextSibling)});var u=function(e){for(var n=l.href,t=f.length;t--;)if(f[t].href===n)return e();setTimeout(function(){u(e)})};return l.addEventListener&&l.addEventListener("load",r),l.onloadcssdefined=u,u(r),l};"undefined"!=typeof exports?exports.loadCSS=n:e.loadCSS=n}("undefined"!=typeof global?global:this);
    </script>
  </head>

  <body>

    <!-- 全新导航栏设计 -->
    <nav class="navbar navbar-expand-lg navbar-dark" style="background-color: #2e86c1;">
      <div class="container">
        <!-- 全新的Logo布局结构 -->
        <div class="nav-header">
          <!-- Material Design风格的汉堡菜单按钮 -->
          <button type="button" class="navbar-toggler md-menu-btn" data-toggle="collapse" data-target="#navbarContent" aria-controls="navbarContent" aria-expanded="false" aria-label="Toggle navigation">
            <span class="material-icons">menu</span>
          </button>

          <!-- 创建两层结构：品牌名+Logo组 -->
          <div class="brand-container">
            <a class="navbar-brand" href="/">{{site.name}}</a>
          </div>
          
          <div class="logos-wrapper">
            <div class="logo-pair">
              <a href="/" class="logo-link stem-logo-link">
                <img class="navb-icon stem-logo" src="/static/img/logo/STEMJC_genomics_in_healthcare.png" alt="JC STEM Lab of Genomics in Healthcare" width="200" height="55">
              </a>
              <a href="https://www.polyu.edu.hk/" class="logo-link polyu-logo-link">
                <img class="navb-icon polyu-logo" src="/static/img/logo/PolyU-Logo.png" alt="Hong Kong Polytechnic University (PolyU) logo" width="160" height="45">
              </a>
            </div>
          </div>
        </div>
        
        <!-- Material Design风格的下拉菜单 -->
        <div class="navbar-collapse collapse md-menu" id="navbarContent">
          <ul class="navbar-nav ml-auto">
            {% for link in site.data.navigation %}
              {% if page.group == link.group %}
                <li class="nav-item active">
                  <a class="nav-link md-menu-item" href="{{link.link}}" aria-current="page"> 
                    {{link.name}}<span class="sr-only">(current)</span>
                  </a>
                </li>
              {% else %}
                <li class="nav-item">
                  <a class="nav-link md-menu-item" href="{{link.link}}"> 
                    {{link.name}}
                  </a>
                </li>
              {% endif %}
            {% endfor %}
          </ul>
        </div><!--/.nav-collapse -->
      </div>
    </nav>

    <div class="container">

    <!-- 添加JavaScript脚本，改善移动端导航体验 -->
    <script>
      document.addEventListener('DOMContentLoaded', function() {
        // 处理移动端导航栏展开/折叠，添加Material Design风格的动画效果
        var navbarToggler = document.querySelector('.navbar-toggler');
        var navbarCollapse = document.querySelector('.navbar-collapse');
        
        if (navbarToggler) {
          navbarToggler.addEventListener('click', function() {
            if (navbarCollapse.classList.contains('show')) {
              navbarCollapse.classList.remove('show');
              // Material Design风格的关闭动画
              navbarCollapse.style.opacity = '0';
              setTimeout(function() {
                navbarCollapse.style.display = 'none';
              }, 300);
            } else {
              // Material Design风格的打开动画
              navbarCollapse.style.display = 'block';
              setTimeout(function() {
                navbarCollapse.classList.add('show');
                navbarCollapse.style.opacity = '1';
              }, 10);
            }
          });
        }
        
        // 点击链接后自动收起导航菜单（仅在移动端）
        var navLinks = document.querySelectorAll('.navbar-nav .nav-link');
        
        function isSmallScreen() {
          return window.innerWidth < 992;
        }
        
        navLinks.forEach(function(link) {
          link.addEventListener('click', function() {
            if (isSmallScreen() && navbarCollapse.classList.contains('show')) {
              navbarCollapse.classList.remove('show');
              // Material Design风格的关闭动画
              navbarCollapse.style.opacity = '0';
              setTimeout(function() {
                navbarCollapse.style.display = 'none';
              }, 300);
            }
          });
        });
        
        // 监听窗口尺寸变化，适配导航栏样式
        window.addEventListener('resize', function() {
          if (!isSmallScreen() && navbarCollapse.classList.contains('show')) {
            navbarCollapse.classList.remove('show');
            navbarCollapse.style.opacity = '';
            navbarCollapse.style.display = '';
          }
        });
        
        // 添加Material Design风格的涟漪效果
        var buttons = document.querySelectorAll('.md-menu-btn, .md-menu-item');
        
        buttons.forEach(function(button) {
          button.addEventListener('click', function(e) {
            var rect = button.getBoundingClientRect();
            var x = e.clientX - rect.left;
            var y = e.clientY - rect.top;
            
            var ripple = document.createElement('span');
            ripple.className = 'md-ripple';
            ripple.style.left = x + 'px';
            ripple.style.top = y + 'px';
            
            button.appendChild(ripple);
            
            setTimeout(function() {
              ripple.remove();
            }, 600);
          });
        });
      });
    </script>
